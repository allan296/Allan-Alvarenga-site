<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <link crossorigin="anonymous" media="all"
        rel="stylesheet"
        href="/css/frameworks.css" />
    <link crossorigin="anonymous" media="all"
        rel="stylesheet" href="/css/github.css" />
    <meta name="viewport" content="width=device-width">

    <title>Como transformar uma matriz de distância em formato longo (tidy) - Tutoriais</title>

    <link rel="icon" type="image/x-icon" class="js-site-favicon" href="/images/favicon.ico">
    <meta name="theme-color" content="#1e2327">
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123-456-789', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>

<body class="env-production emoji-size-boost page-responsive page-profile">
  <div class="position-relative js-header-wrapper ">
    <span class="Progress progress-pjax-loader position-fixed width-full js-pjax-loader-bar">
        <span class="progress-pjax-loader-bar top-0 left-0" style="width: 0%;"></span>
    </span>
    <header class="Header js-details-container Details flex-wrap flex-lg-nowrap p-responsive" role="banner">
        <div class="Header-item d-none d-lg-flex">
            <a class="Header-link" href="/" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                </svg>
            </a>
        </div>
        <div
            class="Header-item Header-item--full flex-column flex-lg-row width-full flex-order-2 flex-lg-order-none mr-0 mr-lg-3 mt-3 mt-lg-0 Details-content--hidden">
            <div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 scoped-search site-scoped-search js-site-search position-relative js-jump-to"
                role="combobox" aria-owns="jump-to-results" aria-label="Search or jump to" aria-haspopup="listbox"
                aria-expanded="false">
                <div class="position-relative">
                </div>
            </div>
        </div>
        <div class="Header-item Header-item--full flex-justify-center d-lg-none position-relative" style="margin-right: auto;">
            <a class="Header-link" href="/" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                </svg>
            </a>
        </div>
        <div class="Header-item position-relative mr-0 d-none d-lg-flex">
            <details class="details-overlay details-reset">
                <summary class="Header-link" aria-label="View profile and more"
                    data-ga-click="Header, show menu, icon:avatar">
                    
                    <img alt="" class="avatar" src="files/foto_perfil.jpg" height="20" width="20">
                    
                </summary>
            </details>
        </div>
    </header>
</div>

<div id="start-of-content" class="show-on-focus"></div>
<div id="js-flash-container">
</div>

  
<div class="application-main " data-commit-hovercards-enabled="">
    <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" class="">
        <main id="js-repo-pjax-container" data-pjax-container="">
            <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav pt-0 pt-lg-4 ">
                <div class="repohead-details-container clearfix container-lg p-responsive d-none d-lg-block">
                    <div class="mb-3 d-flex">
                        <h1 class="public css-truncate float-none flex-auto width-fit pl-0">
                            <a class="avatar mr-1" href="/about/">
                            

                                <img
                                    src="files/foto_perfil.jpg" width="26" height="26">
                            
                            </a>
                            <span class="author"><a
                                    href="/">Allan Alvarenga</a></span>
                            <span class="path-divider">/</span>
                            <strong itemprop="name" class="css-truncate-target" style="max-width: 410px"><a
                                    href="/files/matriz_quadrada/">Como transformar uma matriz de distância em formato longo (tidy)</a></strong>

                            <div class="d-block text-small text-gray">
                                Created <time-ago datetime="0001-01-01" class="no-wrap"
                                    title="Created at 0001/01/01">
                                    0001-01-01</time-ago>
                                <span class="file-info-divider"></span>
                                Modifyed <time-ago datetime="0001-01-01" class="no-wrap"
                                    title="Modified  at 0001/01/01">
                                    0001-01-01</time-ago>
                            </div>
                        </h1>
                    </div>
                </div>




            </div>
            <div class="container-lg clearfix new-discussion-timeline experiment-repo-nav  p-responsive">
                <div class="repository-content ">
                    <div class="Box mt-3 position-relative">
                        <div class="Box-header py-2 d-flex flex-column flex-shrink-0 flex-md-row flex-md-items-center">
                            <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                                848 Words
                                
                            </div>
                        </div>

                        <div id="readme" class="Box-body readme blob instapaper_body js-code-block-container">
                            <article class="markdown-body entry-content p-3 p-md-6" itemprop="text">


<div id="Licença" class="section level1 unnumbered">
<h1>Licença</h1>
<p>This work is licensed under the Creative Commons Attribution-ShareAlike 4.0 International License. To view a copy of this license, visit <a href="http://creativecommons.org/licenses/by-sa/4.0/" class="uri">http://creativecommons.org/licenses/by-sa/4.0/</a> or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.</p>
<div class="figure">
<img src="https://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-sa.png" alt="License: CC BY-SA 4.0" style="width:25.0%" />
<p class="caption">License: CC BY-SA 4.0</p>
</div>
</div>
<div id="citação" class="section level1 unnumbered">
<h1>Citação</h1>
<p>Sugestão de citação: Alvarenga A.M.S.B. RPubs - Como transformar uma matriz de distância em formato longo (tidy) [Internet]. 2019 [cited 2019 Sep 11]. Available from: <a href="http://rpubs.com/allan_alvarenga/dist2tidy" class="uri">http://rpubs.com/allan_alvarenga/dist2tidy</a></p>
</div>
<div id="introdução" class="section level1">
<h1>Introdução</h1>
<p>Os pacotes agrupados no <em>Tidyverse</em><span class="citation"><sup>1</sup></span> como o <em>Ggplot2</em><span class="citation"><sup>2</sup></span> utilizam o formato <strong>Tidy</strong>, ou seja “arrumado”, chamado também de formato “longo”.
Algumas funções muito úteis como <em>gather</em> do pacote <em>Tidyr</em><span class="citation"><sup>3</sup></span> dão conta do recado quando o assunto é transformar do formato largo para o longo.
Entretanto, para objetos <code>stats::dist()</code>, nós utilizamos a função <em>tidy</em>, do pacote <em>broom</em><span class="citation"><sup>4</sup></span> <code>broom::tidy()</code> considerado parte do Tidyverse, no entanto, não é carregado junto com o mesmo.</p>
<p>Aqui, vamos utilizar o conjunto de dados <code>iris</code>:</p>
<pre class="r"><code>library(broom) # transforma os dados
library(ggplot2) # plot
library(viridis) # paleta de cores</code></pre>
<pre><code>## Loading required package: viridisLite</code></pre>
</div>
<div id="matriz-de-distância" class="section level1">
<h1>Matriz de distância</h1>
<p>Primeiro nós criamos uma matriz de distância utilizando a função <code>stats::dist()</code>:</p>
<pre class="r"><code>iris_dist &lt;- stats::dist(t(iris[, 1:4]))
iris_dist</code></pre>
<pre><code>##              Sepal.Length Sepal.Width Petal.Length
## Sepal.Width      36.15785                         
## Petal.Length     28.96619    25.77809             
## Petal.Width      57.18304    25.86407     33.86473</code></pre>
</div>
<div id="formato-longo" class="section level1">
<h1>Formato longo</h1>
<p>Então, transformamos a matriz para o formato longo:</p>
<pre class="r"><code>broom::tidy(iris_dist)</code></pre>
<pre><code>## # A tibble: 6 x 3
##   item1        item2        distance
##   &lt;fct&gt;        &lt;fct&gt;           &lt;dbl&gt;
## 1 Sepal.Width  Sepal.Length     36.2
## 2 Petal.Length Sepal.Length     29.0
## 3 Petal.Width  Sepal.Length     57.2
## 4 Petal.Length Sepal.Width      25.8
## 5 Petal.Width  Sepal.Width      25.9
## 6 Petal.Width  Petal.Length     33.9</code></pre>
<pre class="r"><code># upper: Lógico indicando se deve ou não arrumar a metade superior da matriz de distância. O padrão é o que foi baseado no argumento superior de stats :: dist ().
broom::tidy(iris_dist, upper = TRUE)</code></pre>
<pre><code>## # A tibble: 12 x 3
##    item1        item2        distance
##    &lt;fct&gt;        &lt;fct&gt;           &lt;dbl&gt;
##  1 Sepal.Width  Sepal.Length     36.2
##  2 Petal.Length Sepal.Length     29.0
##  3 Petal.Width  Sepal.Length     57.2
##  4 Sepal.Length Sepal.Width      36.2
##  5 Petal.Length Sepal.Width      25.8
##  6 Petal.Width  Sepal.Width      25.9
##  7 Sepal.Length Petal.Length     29.0
##  8 Sepal.Width  Petal.Length     25.8
##  9 Petal.Width  Petal.Length     33.9
## 10 Sepal.Length Petal.Width      57.2
## 11 Sepal.Width  Petal.Width      25.9
## 12 Petal.Length Petal.Width      33.9</code></pre>
<pre class="r"><code># diagonal: Lógico indicando se deve ou não arrumar os elementos diagonais da matriz de distância. O padrão é o que foi baseado no argumento diag de stats :: dist ().
broom::tidy(iris_dist, diagonal = TRUE)</code></pre>
<pre><code>## # A tibble: 10 x 3
##    item1        item2        distance
##    &lt;fct&gt;        &lt;fct&gt;           &lt;dbl&gt;
##  1 Sepal.Length Sepal.Length      0  
##  2 Sepal.Width  Sepal.Length     36.2
##  3 Petal.Length Sepal.Length     29.0
##  4 Petal.Width  Sepal.Length     57.2
##  5 Sepal.Width  Sepal.Width       0  
##  6 Petal.Length Sepal.Width      25.8
##  7 Petal.Width  Sepal.Width      25.9
##  8 Petal.Length Petal.Length      0  
##  9 Petal.Width  Petal.Length     33.9
## 10 Petal.Width  Petal.Width       0</code></pre>
</div>
<div id="plot" class="section level1">
<h1>Plot</h1>
<div id="tema-do-gráfico" class="section level2">
<h2>Tema do gráfico</h2>
<pre class="r"><code>ggplot2::theme_set(theme_classic(base_size = 6) + theme(
    axis.text.x =  element_text(size = 10),
    axis.ticks.x = element_blank(),
    axis.text.y = element_text(size = 10),
    plot.title = element_text(size = 12),
    legend.text = element_text(size =10),
    legend.title = element_text(size = 10),
    axis.title.x =  element_text(size = 12),
    axis.title.y = element_text(size = 12),
    plot.caption = element_text(size = 10),
    # panel.border = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    axis.line.y = element_line(colour = &quot;black&quot;),
    axis.line.x = element_line(colour = &quot;black&quot;),
    legend.position = &quot;none&quot;)
)</code></pre>
</div>
<div id="plot-padrão" class="section level2">
<h2>Plot padrão</h2>
<pre class="r"><code>iris_tidy &lt;- broom::tidy(iris_dist)

ggplot2::ggplot(iris_tidy,aes(x=item1, y=item2, fill=distance, label=round(distance,3)))+
 geom_tile(color=&quot;black&quot;)+
  geom_text(size=5,color=&quot;white&quot;)+
  scale_fill_viridis()+
  labs(x = &quot;Item 1&quot;,
       y = &quot;Item 2&quot;) </code></pre>
<p><img src="/files/matriz_quadrada_files/figure-html/Plot_padrao-1.png" width="672" /></p>
</div>
<div id="plot-upper" class="section level2">
<h2>Plot Upper</h2>
<pre class="r"><code>iris_upper_tidy &lt;- broom::tidy(iris_dist, upper = TRUE)

ggplot2::ggplot(iris_upper_tidy,aes(x=item1, y=item2, fill=distance, label=round(distance,3)))+
 geom_tile(color=&quot;black&quot;)+
  geom_text(size=5,color=&quot;white&quot;)+
  scale_fill_viridis()+
  labs(x = &quot;Item 1&quot;,
       y = &quot;Item 2&quot;) </code></pre>
<p><img src="/files/matriz_quadrada_files/figure-html/Plot_upper-1.png" width="672" /></p>
</div>
<div id="plot-diagonal" class="section level2">
<h2>Plot diagonal</h2>
<pre class="r"><code>iris_diagonal_tidy &lt;-broom::tidy(iris_dist, diagonal = TRUE)

ggplot2::ggplot(iris_diagonal_tidy,aes(x=item1, y=item2, fill=distance, label=round(distance,3)))+
 geom_tile(color=&quot;black&quot;)+
  geom_text(size=5,color=&quot;white&quot;)+
  scale_fill_viridis()+
  labs(x = &quot;Item 1&quot;,
       y = &quot;Item 2&quot;) </code></pre>
<p><img src="/files/matriz_quadrada_files/figure-html/Plot_diagonal-1.png" width="672" /></p>
</div>
</div>
<div id="referências" class="section level1 unnumbered">
<h1>Referências</h1>
<div id="refs" class="references">
<div id="ref-R-tidyverse">
<p>1. Wickham, H. <em>Tidyverse: Easily install and load the ’tidyverse’</em>. (2019).</p>
</div>
<div id="ref-R-ggplot2">
<p>2. Wickham, H. <em>et al.</em> <em>Ggplot2: Create elegant data visualisations using the grammar of graphics</em>. (2019).</p>
</div>
<div id="ref-R-tidyr">
<p>3. Wickham, H. &amp; Henry, L. <em>Tidyr: Tidy messy data</em>. (2020).</p>
</div>
<div id="ref-R-broom">
<p>4. Robinson, D. &amp; Hayes, A. <em>Broom: Convert statistical analysis objects into tidy tibbles</em>. (2019).</p>
</div>
</div>
</div>
</article>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<div class="utterances"></div>
<script src="https://utteranc.es/client.js"
        repo="example/example.github.io"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>



  <div class="footer container-lg width-full p-responsive" role="contentinfo">
    <div
        class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
        <ul
            class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
            <li class="mr-3 mr-lg-0">© 2019. Theme by <a href="https://github.com/MeiK2333/github-style"><span>github-style</span></a></a></li>
        </ul>

        <a aria-label="Homepage" title="Tutoriais" class="footer-octicon d-none d-lg-block mx-lg-4"
            href="/">
            <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                </path>
            </svg>
        </a>
        <ul
            class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
        </ul>
    </div>
    <div class="d-flex flex-justify-center pb-6">
        <span class="f6 text-gray-light"></span>
    </div>
</div>

<script crossorigin="anonymous"
    type="application/javascript" src="/js/frameworks.js"></script>

<script crossorigin="anonymous" async="async"
    type="application/javascript" src="/js/github-bootstrap.js"></script>
<script>
    let classs = ['pinned-item-desc', 'text-gray', 'text-small', 'd-block', 'mt-2', 'mb-3'];
    const pinned_posts = document.getElementsByName('pinned-post');
    for (let i = 0; i < pinned_posts.length; i++) {
        for (let j = 0; j < classs.length; j++) {
            const ps = pinned_posts[i].getElementsByTagName('p');
            for (let k = 0; k < ps.length; k++) {
                ps[k].classList.add(classs[j]);
            }
        }
    }
    classs = [ 'd-inline-block', 'text-gray', 'mb-2', 'pr-4'];
    const posts_posts = document.getElementsByName('posts-post');
    for (let i = 0; i < posts_posts.length; i++) {
        for (let j = 0; j < classs.length; j++) {
            const ps = posts_posts[i].getElementsByTagName('p');
            for (let k = 0; k < ps.length; k++) {
                ps[k].classList.add(classs[j]);
            }
        }
    }
</script>

</body>

</html>